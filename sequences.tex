% -*- root: main.tex -*-

\chapter{Homotopy Types and Exact Sequences}

Two of our overall goals in this text are:
\begin{enumerate}
    \item
    To treat spaces as if they were algebraic objects, dissecting and assembling them by methods analogous to those we use with, e.g., modules.
    \item
    To express common spaces using small amounts of information.
    The data of a circle or of projective space, considered as raw topological spaces, is extremely substantial, and it would be preferable to be able to name and manipulate these spaces at less cost---ideally, with finite expression.
\end{enumerate}

\noindent
There are several routes to effect these.

\begin{itemize}
    \item
    One can make a re-definition of a ``space'' which is inherently algebraic (or combinatorial).
    This eases the import of algebraic operations into this new context, but it requires one to link the chosen alternative definition with the traditional notion of a space.%
    \todo{Cite? Simplicial sets, co--$E_\infty$ chain complexes?}
    \item
    Alternatively, one can begin with some of the traditional tools of algebraic topology, since we are already certain that these capture interesting topological behavior.
    By adopting a particular perspective on their formal properties, these will become the desired algebraic operations.
    This leaves open how well these methods achieve the goal of ``finite expression'', which we investigate through excessive computation.
\end{itemize}

\noindent
We will take this last approach.
The tools we develop and the language in which we cast them will become the fundamental methods of dissection and assembly used in all later chapters.




\section{The categories of spaces, pointed spaces, and pairs}\label{CategoriesSection}

We first set up the basics of category theory and introduce a few basic examples, which amounts to setting the stage on which the rest of the course will play out.
Since one of our express intentions is do very little geometry or ``point-set'' topology, much of this Lecture will concern itself with boldly asserting such facts in category-theoretic language, so that they can be guiltlessly referred to later.

We begin with some basic operations that one may perform on spaces.
The categorical perspective is to understand objects in a category not by intrinsic presentations, like how the points in a space are arranged, but by their extrinsic effects, like they relate to other objects in the category.
With this as a guiding principle, we give categorically-minded interpretations of some common operations performed on spaces:
\begin{description}
    \item[Products]\marginnote{\citep[0.2]{Switzer}}
    Let $X$, $Y$ be spaces.
    Their \define{product} $X \times Y$ is a space such that the set $\CatOf{Spaces}(T, X \times Y)$ of continuous maps $T \to X \times Y$ bijects with the set $\CatOf{Spaces}(T, X) \times \CatOf{Spaces}(T, Y)$ of pairs $(f_X, f_Y)$ of continuous maps $f_X\co T \to X$ and $f_Y\co Y \to T$.
    A useful mnemonic is that products pull out on the right: \[\CatOf{Spaces}(T, X \times Y) \cong \CatOf{Spaces}(T, X) \times \CatOf{Spaces}(T, Y).\]
    % The bijection in question is induced by a pair of maps $\pi_X\co X \times Y \to X$ and $\pi_Y\co X \times Y \to Y$ which save the indicated coordinate and drop the other: given a map $f\co T \to X \times Y$, post-composing with either of these maps gives the two values $f_X = \pi_X \circ f$ and $f_Y = \pi_Y \circ f$ in the pair.%
    % \marginnote{There's an amusing circularity to this data: if you assume the bijection to begin with, then you can recover the maps $\pi_X$ and $\pi_Y$ by starting with the identity $\id_{X \times Y} \in \CatOf{Spaces}(X \times Y, X \times Y)$ and following it across the bijection to the pair $(\pi_X, \pi_Y) \in \CatOf{Spaces}(X \times Y, X) \times \CatOf{Spaces}(X \times Y, Y)$.
    % This sort of gymnastic forms the foothills of the \define{Yoneda Lemma}.}
    \item[Coproducts]
    The \define{disjoint union} $X \sqcup Y$ is a space with the property \[\CatOf{Spaces}(X \sqcup Y, T) \cong \CatOf{Spaces}(X, T) \times \CatOf{Spaces}(Y, T).\]
    For this reason, the disjoint union is sometimes called the \define{coproduct}, since it pulls out on the left to a product.
    \item[Gluing]\marginnote{\citep[0.1]{Switzer}}
    Let $X$ be a space with a \define{decomposition} $X = \bigcup_j A_j$ into closed subsets.%
    \marginnote[-\baselineskip]{This also holds when each $A_j$ is open in $X$.}
    Then the set $\CatOf{Spaces}(X, Y)$ bijects with the set \[\{(f_j \in \CatOf{Spaces}(A_j, Y)) : f_j|_{A_j \cap A_k} = f_k|_{A_j \cap A_k}\}\] of morphisms on the various components which agree on the overlaps.
    \item[Quotients]\marginnote{\citep[0.3]{Switzer}}
    For $\sim$ an equivalence relation on $X$, there is a space $X / \sim$ such that the set $\CatOf{Spaces}(X / \sim, Y)$ bijects with the subset \[\{f \in \CatOf{Spaces}(X, Y) \mid x \sim x' \Rightarrow f(x) = f(x')\}\] of those continuous maps which are constant on the partition components of $\sim$.
    As a special case, let $A \subseteq X$ be nonempty, and define $X/A$ by extending the total relation on $A$ by the identity relation on $X$ (i.e., the associated partition consists of singletons and $A$).
    Equivalently, maps in $\CatOf{Spaces}(X/A, T)$ correspond exactly to those maps in $\CatOf{Spaces}(X, T)$ which are constant on $A$.
    In diagrammatic terms, this becomes:
    \begin{center}
    \begin{tikzcd}
    A \arrow{r} \arrow{d} & X \arrow{d} \arrow[bend left]{rdd} \\
    * \arrow{r} \arrow[bend right]{rrd} & X / A \arrow[densely dotted, "\exists!"]{rd} \\
    & & T
    \end{tikzcd}
    \end{center}
    Adopting this diagram as the \emph{definition}, this yields $X / \emptyset = X \sqcup *$, which authors sometimes posit as a ``convention''.
\end{description}

\noindent
We mention one further construction which we will be very keen to make use of, and we offset it from those above because of its relative fragility.

\begin{description}
    \item[Function spaces/exponential objects]
    \marginnote{\citep[0.9--11]{Switzer}}
    For $X$, $Y$ spaces, there is a \define{function space} $Y^X$ whose underlying set is $\CatOf{Spaces}(X, Y)$.
    This space upgrades the bijections of mapping sets above into homeomorphisms of mapping spaces.
    If $X$ is locally compact, then the evaluation map $\mathit{ev}\co Y^X \times X \to Y$ is continuous.
    If $X$ and $Z$ are locally compact as well as Hausdorff, then the currying function $Y^{Z \times X} \to (Y^Z)^X$ is a homeomorphism.
    \marginnote[-5\baselineskip]{%
    For a fixed space $Y$, the coproduct and gluing properties characterize the functor $\CatOf{Spaces}(-, Y)$ \define{represented} by $Y$ as a \define{sheaf}, i.e., a functor $\CatOf{Spaces}^{\op} \to \CatOf{Sets}$ which preserves limits.
    Unfortunately, the fragility of function spaces stymies the converse: not all sheaves on $\CatOf{Spaces}$ (or even on locally compact, Hausdorff spaces) are representable.
    Since our affection for representable functors will grow substantially in the coming sections, we will find relief in \Cref{BrownRepSec}, which gives a representability criterion adapted to homotopy theory.
    }
\end{description}

\noindent
We will perpetually arrange to be in the situation where our function-spaces are well-behaved.

\begin{remark}
In each of these cases, the named property uniquely determines the space involved.
For instance, if $Q$ is some unknown space so that $\CatOf{Spaces}(Q, T)$ naturally bijects with the subset \[\{f \in \CatOf{Spaces}(X, T) \mid x \sim x' \Rightarrow f(x) = f(x') \},\] then there is a homeomorphism $Q \xrightarrow\cong X/\sim$.
\end{remark}

\noindent
These constructions also interact well in most cases of geometric interest.
For example:

\begin{lemma}\label{ProdQuotInterchange}\marginnote{\citep[0.4]{Switzer}}\pushQED{\qed}
If $Y$ is locally compact (e.g., if $Y = [0, 1]$), then there is a homeomorphism \[\frac{X \times Y}{\sim \times \id} \xrightarrow{\cong} \left( \frac{X}{\sim}\right) \times Y. \qedhere \popQED\]
\end{lemma}

% \noindent
% \Cref{ProdQuotInterchange} also encodes \define{relative homotopy} in terms of a quotient:

% \begin{corollary}
% Fix a homotopy $H\co X \times I \to Y$.
% If there is a fixed relation $\sim$ so that for every time $t$, $H$ factors as $X \times \{t\} \to X/\sim \times \{t\} \to Y$ then $H$ factors as a whole: $X \times I \to X/\sim \times I \xrightarrow{\widetilde H} Y$. \qed
% \end{corollary}

\begin{corollary}\marginnote{\citep[0.8]{Switzer}}\pushQED{\qed}
If $A \subseteq X$ is closed and $H(a, t) = H(a', t)$ for all $a, a' \in A$ and $t \in I$ (i.e., $H$ is a homotopy \define{relative to $A$}), then it factors as
\[X \times I \to X/A \times I \to Y. \qedhere \popQED\]
\end{corollary}

Relative homotopy provides a convenient segue into two other categories of interest: the category of relative pairs and the category of pointed spaces.

\begin{definition}
The category of \define{relative pairs} has objects given by inclusions $A \subseteq X$, and a morphism $(A \subseteq X) \to (B \subseteq Y)$ between two such pairs is given by a continuous map $f\co X \to Y$ which has the property $f(A) \subseteq B$.
\marginnote[-3\baselineskip]{%
There is no reason one must stop at a single inclusion.
Chains of inclusions---even infinite chains---are interesting, and they are generally referred to as \define{filtered spaces}.
}
These pairs and their maps appear naturally when discussing relative homology or relative homotopy.
\end{definition}

\begin{definition}\marginnote{\citep[0.12]{Switzer}}
The category $\CatOf{Spaces}_{*/}$ of \define{pointed spaces} has objects given by $\{x_0\} \subseteq X$ for some choice of singleton $\{x_0\}$, and a morphism $(\{x_0\} \subseteq X) \to (\{y_0\} \subseteq Y)$ between two such pointed spaces is a map $f\co X \to Y$ with the property $f(x_0) = y_0$.
Pointed spaces and their maps arise when defining reduced homology or homotopy groups (e.g., the fundamental group).
This presentation makes plain that pointed spaces form a full subcategory of relative pairs: they are the special case where the privileged subset is a singleton.
\end{definition}

These categories admit all of the same categorical constructions as $\CatOf{Spaces}$: they have products, coproducts, and quotients, their morphisms glue, and one can build function objects when the spaces involved carry appropriate adjectives.
In many cases, if one forgets about the privileged subset and considers just the underlying object of $\CatOf{Spaces}$, the construction even agrees with the one in $\CatOf{Spaces}$.
\marginnote[-2\baselineskip]{%
This observation is owed to some adjunctions: a pair and a pointed space both forget to a space, a space becomes pointed by adding a disjoint basepoint, and a pair becomes a pointed space by quotienting the privileged subspace to a point.
Each of these functors admits an adjoint, which helps pin down the formulas below.
}
\begin{description}
    \item[Coproducts]
    The coproduct of pairs is given by \[(A \subseteq X) \sqcup (B \subseteq Y) = (A \sqcup B) \subseteq (X \sqcup Y).\]
    \item[Products]
    The product is given by \[(A \subseteq X) \times (B \subseteq Y) = (((A \times Y) \cup (X \times B)) \subseteq X \times Y),\] but the privileged subspace has become more complicated.
    \item[Function spaces / exponential objects]
    One can also define a function object \[((B \subseteq Y)^{(A \subseteq A)} \subseteq (B \subseteq Y)^{(A \subseteq X)}),\] itself a relative pair which we abbreviate to $(B \subseteq Y)^{(A \subseteq X)}$ for sanity's sake.
    Function objects again satisfy an analogue of currying:%
    \marginnote{\citep[Proposition 0.13]{Switzer}}
    \begin{align*}
    (B \subseteq Y)^{((Z \times A) \cup (C \times X)) \subseteq Z \times X} & = (B \subseteq Y)^{(C \subseteq Z) \times (A \subseteq X)} \\
    & = \left( (B \subseteq Y)^{(C \subseteq Z)} \right)^{(A \subseteq X)}.
    \end{align*}
\end{description}

In trying to find analogues of these claims in pointed spaces, there is the following snag: the coproduct of two pointed spaces \emph{in the category of relative pairs} is given by \[(\{x_0\} \subseteq X) \sqcup (\{y_0\} \subseteq Y) = (\{x_0, y_0\} \subseteq (X \sqcup Y)),\] but this coproduct has escaped the subcategory $\CatOf{Spaces}_{*/}$.
One can forcefully correct this by quotienting the privileged subspace so that it becomes a point---and, in fact, this recovers the correct coproduct in pointed spaces:

\begin{definition}
For two pointed spaces $\{x_0\} \subseteq X$ and $\{y_0\} \subseteq Y$, their \define{wedge sum} $X \vee Y$ is the coproduct in the category of pointed spaces: \[\CatOf{Spaces}_{*/}(X \vee Y, T) = \CatOf{Spaces}_{*/}(X, T) \times \CatOf{Spaces}_{*/}(Y, T).\]
In terms of the pair, it is given by \[X \vee Y = \frac{\{x_0, y_0\} \subseteq (X \sqcup Y)}{\{x_0, y_0\}}.\]
\end{definition}

The relationship between the products in relative pairs and in pointed spaces is much looser: the product of pointed spaces is given by \[(\{x_0\} \subseteq X) \times (\{y_0\} \subseteq Y) = (\{(x_0, y_0)\} \subseteq (X \times Y)),\] where the complexity in the privileged subspace has seemingly evaporated.
\marginnote{We didn't have to quotient this time because of the chirality of the limits involved: coproducts and quotients are both colimits, but a product is a limit.}
However, we find ourselves in a further awkward position when we investigate the currying law for the function object for pointed spaces:
\begin{align*}
(\{y_0\} \subseteq Y)^{((Z \times \{x_0\}) \cup (\{z_0\} \times X)) \subseteq Z \times X} & = (\{y_0\} \subseteq Y)^{(\{z_0\} \subseteq Z) \times (\{x_0\} \subseteq X)} \\
& = \left( (\{y_0\} \subseteq Y)^{(\{z_0\} \subseteq Z)} \right)^{(\{x_0\} \subseteq X)}.
\end{align*}
In particular, the exponent on the far left is \emph{not} the product in pointed spaces---indeed, it isn't a pointed space at all.
We can, again, force it to become pointed:

\begin{definition}\marginnote{\citep[2.4]{Switzer}}
The \define{smash product} of two pointed spaces $\{x_0\} \subseteq X$ and $\{z_0\} \subseteq Z$ is given by \[(\{x_0\} \subseteq X) \sm (\{z_0\} \subseteq Z) := \frac{X \times Z}{(X \times \{z_0\}) \cup (\{x_0\} \times Z)} = \frac{X \times Z}{X \vee Z}.\]
This gives a \define{monoidal structure} on $\CatOf{Spaces}_{*/}$ which is \emph{not} the Cartesian one.
\marginnote{That is: the one given by the ordinary product.}
\end{definition}

\begin{corollary}
For pointed spaces $X$, $Y$, and $Z$ which are appropriately nice, the currying law for function objects takes the form
\begin{align*}
Y^{Z \sm X} & \cong (Y^Z)^X, &
\CatOf{Spaces}_{*/}(Z \sm X, Y) & \cong \CatOf{Spaces}_{*/}(X, Y^Z). \qed
\end{align*}
\end{corollary}

\begin{lemma}\pushQED{\qed}
This product is related to the product on unpointed spaces by \[X_+ \sm Y_+ \cong (X \times Y)_+,\] where $(-)_+\co \CatOf{Spaces} \to \CatOf{Spaces}_{*/}$ denotes the functor which adds a disjoint basepoint. \qedhere \popQED
\end{lemma}

\begin{definition}\label{HoCatDefn}%
\marginnote{\citep[0.7]{Switzer}}
Finally, we introduce the \define{homotopy category of (pointed) spaces}, $h\CatOf{Spaces}_{*/}$, whose objects are the same as that of $\CatOf{Spaces}_{*/}$ but whose morphism sets are given by the quotient \[h\CatOf{Spaces}_{*/}(X, Y) = \frac{\CatOf{Spaces}_{*/}(X, Y)}{f \sim g},\] where $f \sim g$ indicates that there is a homotopy $H\co X \sm I_+ \to Y$ between $f$ and $g$.
All of the basic invariants of algebraic topology descend to this quotient category: homotopy points and reduced homology groups behave the same on homotopic maps.
Because we will work in this category so often, we will abbreviate this mapping set by \[h\CatOf{Spaces}_{*/}(X, Y) = [X, Y].\]
\end{definition}




\section{Perspectives on the fundamental group}

With these categorical definitions in place, we are in position to begin investigating the traditional tools of algebraic topology in their terms.
In this section, we treat the fundamental group, though we begin with an even simpler invariant.

\begin{definition}\marginnote{\citep[2.1]{Switzer}}
Write $I = [0, 1]$ for the closed unit interval.
The \define{pathspace} $PX$ of a space $X$ is given by $PX = X^I$.
We write $\pi_0(X)$ for the set of path-components of $X$, i.e., the quotient of $X$ where $x$ is related to $x'$ whenever there exists $\gamma \in X^I$ with
\begin{align*}
\gamma(0) & = x, &
\gamma(1) & = x'.
\end{align*}
\end{definition}

\begin{remark}
The mapping set given in \Cref{HoCatDefn} is equivalent to \[[X, Y] = \pi_0 Y^X.\]
By specializing $X$ to the $0$--sphere $S^0 = \{\pm 1\} \subset \R$, we have \[Y^{S^0} = (Y, y_0)^{(\{\pm 1\}, -1)} = Y^{\{1\}} = Y,\] and hence \[\pi_0 Y = \pi_0 Y^{S^0} = [S^0, Y].\]
\end{remark}

Recall now that the \define{fundamental group} is given by \[\pi_1(Y) := \{\text{homotopy classes of pointed loops in $X$}\} = [S^1, Y].\]
We can use adjunctions to extend this to several equivalent definitions:
\begin{align*}
\pi_1(Y) & = [S^1, Y] = [S^0 \sm S^1, Y] = [S^0, Y^{(S^1)}] = \pi_0 Y^{S^1}.
\end{align*}
One might wonder what properties of $X$ and $Y$ make $[X, Y]$ into a group, since we know that $[S^1, -]$ and $[S^0, (-)^{S^1}]$ are group-valued.
In keeping with our investigation so far, we will be particularly interested in a \emph{categorical} answer to this question, and to this end it will be helpful to have a categorical definition of a group.

\begin{definition}\marginnote{\citep[pg.\ 14]{Switzer}}
A \define{group} is a pointed set $G$ with maps $\mu\co G \times G \to G$ and $\chi\co G \to G$ which make the following diagrams commute:
\begin{center}
\begin{tabular}{rc}
\textit{Associativity:} & 
\begin{tikzcd}[ampersand replacement=\&]
G \times G \times G \arrow["\mu \times \id"]{r} \arrow["\id \times \mu"]{d} \& G \times G \arrow["\mu"]{d} \\
G \times G \arrow["\mu"]{r} \& G,
\end{tikzcd}
\\
\textit{Unitality:} &
\begin{tikzcd}[ampersand replacement=\&]
G \arrow[equal]{rd} \arrow["\eta \times \id"]{r} \& G \times G \arrow["\mu"]{d} \& G \arrow["\id \times \eta"']{l} \arrow[equal]{ld} \\
\& G,
\end{tikzcd}
\\
\textit{Invertibility:} &
\begin{tikzcd}[ampersand replacement=\&]
G \arrow["0"]{d} \arrow["\chi \times \id"]{r} \& G \times G \arrow["\mu"]{d} \& G \arrow["\id \times \chi"']{l} \arrow["0"]{d} \\
* \arrow["\eta"]{r} \& G \& * \arrow["\eta"']{l} .
\end{tikzcd}
\end{tabular}
\end{center}
More generally, a \define{group object} in a pointed category $\CatOf{C}$ is a pointed object $G$ such that $G^{\times 2}$ and $G^{\times 0}$ exist, equipped with maps $\mu$ and $\chi$ satisfying the same diagrams.
\end{definition}

\begin{definition}\marginnote{\citep[Definition 2.9]{Switzer}}
An \define{$H$--group} $K$ is group object in $h\CatOf{Spaces}_{*/}$, i.e., a pointed space with maps $\mu$ and $\chi$ satisfying the group diagrams up to homotopy.
\end{definition}

\begin{lemma}\label{RepresentableGroupsLemma}
If $G$ is a group object in a category $\CatOf{C}$, then $\CatOf{C}(-, G)$ is a functor from $\CatOf{C}^{\op}$ to $\CatOf{Groups}$.
\end{lemma}
\begin{proof}
Recall that the defining property of the product $X \times Y$ is \[\CatOf{C}(T, X \times Y) \cong \CatOf{C}(T, X) \times \CatOf{C}(T, Y).\]
For a fixed test object $T$, the functor $\CatOf{C}(T, -)$ applied to the multiplication $\mu$ on $G$ gives \[\CatOf{C}(T, G) \times \CatOf{C}(T, G) \cong \CatOf{C}(T, G \times G) \xrightarrow{\mu_*} \CatOf{C}(T, G),\] and in this way $\mu_*$ becomes a multiplication on $\CatOf{C}(T, G)$.
The inversion $\chi$ on $G$ similarly induces an inversion $\chi_*$ on $\CatOf{C}(T, G)$, and together these make the group object diagrams commute.
\marginnote[-6\baselineskip]{%
For a pair of maps \[f, g\co T \to G,\] it can be helpful to factor \[(f, g)\co T \to G \times G\] through the diagonal as in \[T \xrightarrow\Delta T \times T \xrightarrow{f \times g} G \times G,\] as this lets one leverage the bifunctoriality of $\times$.
This doesn't come up directly here, but it does arise in applications.
}
\end{proof}

\begin{remark}
In fact, this is biconditional: if a representable functor factors through $\CatOf{Groups}$, then the representing object inherits the structure of a group object.
This is a consequence of the \define{Yoneda lemma}: any natural transformation between representable functors is uniquely induced by pushforward along a map between the representing objects.
\end{remark}

\begin{corollary}\marginnote{\citep[Proposition 2.14]{Switzer}}
For $K$ an $H$--group, $[-, K]$ is valued in groups. \qed
\end{corollary}

\begin{example}\marginnote{\citep[Examples 2.15.ii]{Switzer}}
The usual verification that the fundamental group of a space is a group can be viewed as giving an $H$--space structure on $Y^{S^1} =: \Loops Y$.
The multiplication map $\mu$ is given by rescaling and concatenating two loops, and the inversion map $\chi$ is given by reversing a loop.
Hence, not only is the fundamental group $\pi_1 Y = \pi_0 \Omega Y = [S^0, \Omega Y]$ a group, but actually $[X, \Omega Y]$ is naturally a group for any $X$.
\end{example}

What about the other formulation?
We also have that $\pi_1 Y = [S^1, Y]$ is naturally group-valued as $Y$ varies.
From this, one might expect the root cause does not reside in the $Y$--dependent object ``$\Loops Y$'' but rather in $S^1$ alone.
In order to address this by the same tactic, we must confront the structure required on $X$ in order to make $[X, Y]$ into a group.
Using the identity $[X \vee X, Y] \cong [X, Y] \times [X, Y]$, we are led to the following definition:

\begin{definition}\marginnote{\citep[Definition 2.16]{Switzer}}
A \define{cogroup object} in a pointed category $\CatOf{C}$ is a pointed object $K$ such that $K^{\vee 2}$ and $K^{\vee 0}$ exist, equipped with maps $\mu'$ and $\chi'$ so that the following diagrams commute:
\begin{center}
\begin{tabular}{rc}
\textit{Coassociativity:} &
\begin{tikzcd}[ampersand replacement=\&]
K \vee K \vee K \arrow["\mu' \vee \id", leftarrow]{r} \arrow["\id \vee \mu'", leftarrow]{d} \& K \vee K \arrow["\mu'", leftarrow]{d} \\
K \vee K \arrow["\mu'", leftarrow]{r} \& K,
\end{tikzcd}
\\
\textit{Counitality:} &
\begin{tikzcd}[ampersand replacement=\&]
K \arrow[equal]{rd} \arrow["0 \vee \id", leftarrow]{r} \& K \vee K \arrow["\mu'", leftarrow]{d} \& K \arrow["\id \vee 0"', leftarrow]{l} \arrow[equal]{ld} \\
\& K,
\end{tikzcd}
\\
\textit{Coinvertibility:} &
\begin{tikzcd}[ampersand replacement=\&]
K \arrow[leftarrow, "\eta"]{d} \arrow["\chi' \vee \id", leftarrow]{r} \& K \vee K \arrow["\mu'", leftarrow]{d} \& K \arrow["\id \vee \chi'"', leftarrow]{l} \arrow[leftarrow, "\eta"]{d} \\
* \arrow[leftarrow, "0"]{r} \& K \& * \arrow[leftarrow, "0"]{l} .
\end{tikzcd}
\end{tabular}
\end{center}
An \define{$H$--cogroup} $K$ is then a cogroup object in $h\CatOf{Spaces}_{*/}$.
\end{definition}

\begin{corollary}\marginnote{\citep[Proposition 2.21]{Switzer}}
For $H$ an $H$--cogroup, $[H, -]$ is valued in groups. \qed
\marginnote{%
Again, the Yoneda lemma for \emph{corepresentable} functors gives a converse to this claim.
}
\end{corollary}

\begin{example}
$S^1$ is an $H$--cogroup.
We depict its structure maps by shading the loops in $S^1 \vee \cdots \vee S^1$ different colors, then pulling back that shading along the indicated map.
For example, the comultiplication map $\mu'$ is given by quotienting together the basepoint and its antipode, and the corresponding color map looks like
\todo{These would be improved by explicitly tagging the basepoint, which must remain black.}
\begin{center}
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle{green,black,red,black}
    \end{tikzpicture}
    $\xrightarrow{\mu'}$
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \begin{scope}[scale=0.5, xshift=-2.5cm]
        \ColourTransitionCircle{black,red}
        \end{scope}
        \begin{scope}[scale=0.5, xshift=2.5cm]
        \ColourTransitionCircle{green,black}
        \end{scope}
    \end{tikzpicture}
    .
\end{center}
The left arm of the coassociativity axiom has color map
\begin{center}
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle{black,green,black,black,red,black,black,magenta}
    \end{tikzpicture}
    $\xrightarrow{\mu'}$
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \begin{scope}[scale=0.5, xshift=-2.5cm]
        \ColourTransitionCircle{black,red}
        \end{scope}
        \begin{scope}[scale=0.5, xshift=2.5cm]
        \ColourTransitionCircle{black,green,black,magenta}
        \end{scope}
    \end{tikzpicture}
    $\xrightarrow{\id \vee \mu'}$
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \begin{scope}[scale=0.5, xshift=-2.5cm]
        \ColourTransitionCircle{black,red}
        \end{scope}
        \begin{scope}[scale=0.33, xshift=2.4cm, yshift=2.5cm]
        \ColourTransitionCircle[angle=45]{green,black}
        \end{scope}
        \begin{scope}[scale=0.33, xshift=2.4cm, yshift=-2.5cm]
        \ColourTransitionCircle[angle=-45]{magenta,black}
        \end{scope}
    \end{tikzpicture}
    ,
\end{center}
while the right arm has color map
\begin{center}
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle{magenta,black,black,green,black,red,black,black}
    \end{tikzpicture}
    $\xrightarrow{\mu'}$
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \begin{scope}[scale=0.5, xshift=-2.5cm]
        \ColourTransitionCircle{black,green,black,red}
        \end{scope}
        \begin{scope}[scale=0.5, xshift=2.5cm]
        \ColourTransitionCircle{magenta,black}
        \end{scope}
    \end{tikzpicture}
    $\xrightarrow{\mu' \vee \id}$
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \begin{scope}[scale=0.33, xshift=-2.4cm, yshift=2.5cm]
        \ColourTransitionCircle[angle=-45]{black,green}
        \end{scope}
        \begin{scope}[scale=0.33, xshift=-2.4cm, yshift=-2.5cm]
        \ColourTransitionCircle[angle=45]{black,red}
        \end{scope}
        \begin{scope}[scale=0.5, xshift=2.5cm]
        \ColourTransitionCircle{magenta,black}
        \end{scope}
    \end{tikzpicture}
    ,
\end{center}
and coassociativity is checked by noting that the pulled-back color maps can be homotoped into one another.
Similarly, counitality is checked by noting that the color map
\begin{center}
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle{black,black,red,black}
    \end{tikzpicture}
    $\xrightarrow{\id \vee 0}$
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \begin{scope}[scale=0.5, xshift=-2.5cm]
        \ColourTransitionCircle{black,red}
        \end{scope}
        \begin{scope}[scale=0.5, xshift=2.5cm]
        \ColourTransitionCircle{black,black}
        \end{scope}
    \end{tikzpicture}
\end{center}
is homotopic to that of
\begin{center}
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle{black,red}
    \end{tikzpicture}
    .
\end{center}
The coinversion map $\chi'$ acts as
\begin{center}
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle[angle=90]{black,red,orange,yellow,green,cyan,magenta}
    \end{tikzpicture}
    $\xrightarrow{\chi'}$
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \begin{scope}
        \ColourTransitionCircle[angle=90]{black,magenta,cyan,green,yellow,orange,red}
        \end{scope}
    \end{tikzpicture}
    ,
\end{center}
and coinvertibility is checked by noting that the pulled-back color map
\begin{center}
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle[angle=90]{black,red,orange,yellow,green,cyan,magenta,black,magenta,cyan,green,yellow,orange,red}
    \end{tikzpicture}
    $\xrightarrow{\chi' \vee \id}$
    \begin{tikzpicture}[scale=0.5, baseline={([yshift=-1ex]current bounding box.center)}]
        \begin{scope}[scale=0.5, xshift=-2.5cm]
        \ColourTransitionCircle{black,red,orange,yellow,green,cyan,magenta}
        \end{scope}
        \begin{scope}[scale=0.5, xshift=2.5cm]
        \ColourTransitionCircle[angle=180]{black,magenta,cyan,green,yellow,orange,red}
        \end{scope}
    \end{tikzpicture}
\end{center}
is homotopic to the constant map through
\begin{center}
    \begin{tikzpicture}[scale=0.16, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle[angle=90]{black,red,orange,yellow,green,cyan,magenta,black,magenta,cyan,green,yellow,orange,red}
    \end{tikzpicture}
    $\sim$
    \begin{tikzpicture}[scale=0.16, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle[angle=90]{black,red,orange,yellow,green,cyan,magenta,cyan,green,yellow,orange,red}
    \end{tikzpicture}
    $\sim$
    \begin{tikzpicture}[scale=0.16, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle[angle=90]{black,red,orange,yellow,green,cyan,green,yellow,orange,red}
    \end{tikzpicture}
    $\sim$
    \begin{tikzpicture}[scale=0.16, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle[angle=90]{black,red,orange,yellow,green,yellow,orange,red}
    \end{tikzpicture}
    $\sim$
    \begin{tikzpicture}[scale=0.16, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle[angle=90]{black,red,orange,yellow,orange,red}
    \end{tikzpicture}
    $\sim$
    \begin{tikzpicture}[scale=0.16, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle[angle=90]{black,red,orange,red}
    \end{tikzpicture}
    $\sim$
    \begin{tikzpicture}[scale=0.16, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle[angle=90]{black,red}
    \end{tikzpicture}
    $\sim$
    \begin{tikzpicture}[scale=0.16, baseline={([yshift=-1ex]current bounding box.center)}]
        \ColourTransitionCircle[angle=90]{black}
    \end{tikzpicture}
    .
\end{center}
\end{example}

\begin{example}\marginnote{\citep[2.22]{Switzer}}
In fact, $S^1 \sm X =: \Susp X$ is an $H$--cogroup for \emph{any} $X$, using the same pinching and reversing technique along the suspension coordinate.
\end{example}

\begin{lemma}\marginnote{\citep[Proposition 2.23]{Switzer}}
The adjunction $[\Susp X, Y] \cong [X, \Loops Y]$ is an isomorphism of groups.
\end{lemma}
\begin{proof}[Proof sketch]
This is a matter of writing out the formulas for \[\Susp X \xrightarrow{\mu'} \Susp X \vee \Susp X \xrightarrow{f' \vee g'} Y \vee Y \xrightarrow{\Delta'} Y\] and \[X \xrightarrow\Delta X \times X \xrightarrow{f \times g} \Loops Y \times \Loops Y \xrightarrow\mu Y. \qedhere\]
\end{proof}




\section{Higher homotopy groups}

Just as we used the exponential adjunction to give a family of equivalent definitions of the fundamental group, there is a similar family for higher homotopy groups, which we explore today.
The key input is the following:

\begin{definition}\marginnote{\citep[3.1]{Switzer}}
The \define{$n$\textsuperscript{th} homotopy group} of a pointed space $X$ is defined by $\pi_n X = [S^n, X]$.
\end{definition}

\begin{lemma}\marginnote{\citep[Lemma 2.27]{Switzer}}
For all $n \ge 0$, there is a homeomorphism $S^1 \sm S^n \cong S^{n+1}$.
\end{lemma}
\begin{proof}
First, the \define{reduced cone} is defined by $CX = I \sm X$, where $I$ is again the closed unit interval.
There is a homeomorphism \[CS^n = I \sm S^n \cong D^{n+1},\] given by linear interpolation from the sphere to its basepoint.
Now, decompose $S^1$ into the disjoint union of its closed upper- and lower-hemispheres, quotiented together along the equator.
Applying the interchange lemmata from \Cref{CategoriesSection}, this decomposes $S^1 \sm S^n$ into two copies of $I \sm S^n \cong D^{n+1}$, quotiented together along their boundaries.
This is homeomorphic to the decomposition of $S^{n+1}$ into its upper- and lower-hemispheres.
\end{proof}

\begin{corollary}\label{EquivalentDefnsOfPiN}\pushQED{\qed}
The following sets all give equivalent definitions of $\pi_n X$: \[\pi_n X = [\Susp^n(S^0), X] = [\Susp^{n-1} S^0, \Loops X] = \cdots = [S^0, \Loops^n X]. \qedhere \popQED\]
\end{corollary}

We've quietly asserted that $\pi_n X$ is a group, but \emph{which} group structure we mean is not immediately clear: in light of \Cref{EquivalentDefnsOfPiN}, there appear to be many different multiplications on the homotopy mapping sets, each coming from any one of the applications of $\Susp$ or of $\Loops$.
We tame this complexity by showing that each of these choices gives the same multiplication.

\begin{lemma}[Eckmann--Hilton]\label{EckmannHilton}%
\marginnote{\citep[Proposition 2.24]{Switzer}}
Let $S$ be a set with two products $\circ$ and $*$ which share a unit $e$ and which satisfy \[(x * x') \circ (y * y') = (x \circ y) * (x' \circ y').\]  Then $\circ = *$ and both are associative and commutative.
\end{lemma}
\begin{proof}
We cleverly redistribute:
\begin{align*}
x \circ y & = (x * e) \circ (e * y) = (x \circ e) * (e \circ y) = x * y, \\
x \circ y & = (e * x) \circ (y * e) = (e \circ y) * (x \circ e) = y * x. \qedhere
\end{align*}
\end{proof}

\begin{corollary}\marginnote{\citep[Proposition 2.25]{Switzer}}
Let $K$ be an $H$--cogroup and $L$ an $H$--group.
The two multiplications so-induced on the mapping set $[K, L]$ are equal and commutative.
\end{corollary}
\begin{proof}
Consider the following diagram:
\begin{center}
\begin{tikzcd}
K \times K \arrow{r} & (K \vee K) \times (K \vee K) \arrow["{(f \vee f') \times (g \vee g')}"]{r} & (L \vee L) \times (L \vee L) \arrow{r} & L \times L \arrow{d} \\
K \arrow{u} \arrow{d} & \phantom{\begin{array}{c}(K \times *) \times (K \times *) \\ \cup \\ (* \times K) \times (* \times K) \end{array}} & \phantom{\begin{array}{c}(L \times *) \times (L \times *) \\ \cup \\ (* \times L) \times (* \times L) \end{array}} & L \\
K \vee K \arrow{r} & (K \times K) \vee (K \times K) \arrow["{(f \times g) \vee (f' \times g')}"]{r} & (L \times L) \vee (L \times L) \arrow{r} & L \vee L \arrow{u}.
\end{tikzcd}
\end{center}
The top composite corresponds to $(f +_K f') +_L (g +_K g')$, and the bottom composite corresponds to $(f +_L g) +_K (f' +_L g')$.
If these were to agree, we could deduce the claim from \Cref{EckmannHilton}.
We approach this in stages, breaking the diagram into smaller ones which more clearly commute.

The diagonal map $\Delta\co K \to K \times K$ replicates its input onto both coordinates, as in $x \mapsto (x, x)$.
Writing $\mu'(k) = (k_1, k_2)$, we can apply $\Delta$ either before or after the comultiplication map $\mu'$ on $K$, and get the same answer up to a twist:
\begin{align*}
(\Delta \vee \Delta) \circ \mu'(k) & = (\Delta \times \Delta)(k_1, k_2) = (k_1, k_1, k_2, k_2), \\
(\mu' \times \mu') \circ \Delta(k) & = (\mu' \times \mu')(k, k) = (k_1, k_2, k_1, k_2).
\end{align*}
Additionally, because $\mu'\co K \to K \vee K$ targets the wedge sum, it is always the case that at least one of $k_1$ or $k_2$ equals the basepoint.
From these two considerations, it follows that the left-hand portion of the following diagram commutes:
\begin{center}
\begin{tikzcd}
K \times K \arrow{r} & (K \vee K) \times (K \vee K) \arrow{r} & (L \vee L) \times (L \vee L) \arrow{r} & L \times L \arrow{d} \\
K \arrow{u} \arrow{d} \arrow{r} & \begin{array}{c}(K \times *) \times (K \times *) \\ \cup \\ (* \times K) \times (* \times K) \end{array} \arrow{u} \arrow["\id \times T \times \id"]{d} & \phantom{\begin{array}{c}(L \times *) \times (L \times *) \\ \cup \\ (* \times L) \times (* \times L) \end{array}} & L \\
K \vee K \arrow{r} & (K \times K) \vee (K \times K) \arrow{r} & (L \times L) \vee (L \times L) \arrow{r} & L \vee L \arrow{u},
\end{tikzcd}
\end{center}
where $T$ denotes the twist map.
Now, we apply $(f, f', g, g')$ on top and $(f, g, f', g')$ on bottom.
Again, the diagram commutes up to transposition of the two middle coordinates.
\begin{center}
\begin{tikzcd}
K \times K \arrow{r} & (K \vee K) \times (K \vee K) \arrow{r} & (L \vee L) \times (L \vee L) \arrow{r} & L \times L \arrow{d} \\
K \arrow{u} \arrow{d} \arrow{r} & \begin{array}{c}(K \times *) \times (K \times *) \\ \cup \\ (* \times K) \times (* \times K) \end{array} \arrow{u} \arrow["\id \times T \times \id"]{d} \arrow{r}  & \begin{array}{c}(L \times *) \times (L \times *) \\ \cup \\ (* \times L) \times (* \times L) \end{array} \arrow{u} \arrow["\id \times T \times \id"]{d} & L \\
K \vee K \arrow{r} & (K \times K) \vee (K \times K) \arrow{r} & (L \times L) \vee (L \times L) \arrow{r} & L \vee L \arrow{u}.
\end{tikzcd}
\end{center}
Finally, we make use of the specific subspace we'd highlighted in the middle.
In (either half of) this subspace, two of the coordinates are constrained to lie at the basepoint.
Because of this, we can apply the unit axioms for the multiplication map and for the fold map to conclude that they produce the same value.
This amounts to the commutativity of the final two rectangles:
\begin{center}
\begin{tikzcd}
K \times K \arrow{r} & (K \vee K) \times (K \vee K) \arrow{r} & (L \vee L) \times (L \vee L) \arrow{r} & L \times L \arrow{d} \\
K \arrow{u} \arrow{d} \arrow{r} & \begin{array}{c}(K \times *) \times (K \times *) \\ \cup \\ (* \times K) \times (* \times K) \end{array} \arrow{u} \arrow["\id \times T \times \id"]{d} \arrow{r}  & \begin{array}{c}(L \times *) \times (L \times *) \\ \cup \\ (* \times L) \times (* \times L) \end{array} \arrow{u} \arrow["\id \times T \times \id"]{d} \arrow{u} \arrow{r} & L \\
K \vee K \arrow{r} & (K \times K) \vee (K \times K) \arrow{r} & (L \times L) \vee (L \times L) \arrow{r} & L \vee L \arrow{u}.
\end{tikzcd}
\end{center}
Since each of the squares commutes, the outer composites are equal.
\end{proof}

\begin{corollary}\marginnote{\citep[Proposition 2.26]{Switzer}}
For $n \ge 2$, $\pi_n X$ has only one multiplication, and it is commutative. \qed
\end{corollary}




\section{Exact sequences in $\CatOf{Spaces}$}

An \emph{extremely} common device in algebraic topology is the exact sequence:

\begin{definition}\marginnote{\citep[2.29]{Switzer}}
A pair of maps of groups \[N \xrightarrow f G \xrightarrow g H\] is called \define{exact} when $\im f = \ker g$.
More weakly, a sequence of pointed sets $X \xrightarrow f Y \xrightarrow g Z$ is \define{exact} if $\im f = g^{-1}(*)$.
\end{definition}

\noindent
Last time, we put structures onto space $K$ and $L$ so that $[K, -]$ and $[-, L]$ became valued in groups.
Today we are after something similar: we would like to study when continuous maps $A \to B \to C$ induce exact sequences of the functors they co/represent.

\begin{definition}\marginnote{\citep[{Definitions 2.30 and 2.49}]{Switzer}}
If the sequence of pointed sets \[[-, A] \to [-, B] \to [-, C]\] is exact, then we say that the underlying sequence of spaces is \define{exact}.
If the sequence of pointed sets \[[A, -] \from [B, -] \from [C, -]\] is exact, then we say that the underlying sequence of spaces is \define{coexact}.%
\marginnote[-5\baselineskip]{%
These more commonly go by the names \define{fiber} and \define{cofiber} sequences of spaces.
We will work later to justify these alternative names.
}
\end{definition}

At first brush, one might imagine that such sequences are somewhat rare, or that they at least require some nice properties of $A$, $B$, or $f$.%
\marginnote[-\baselineskip]{%
This scarcity is true for maps of groups: $f\co H \to G$ can only participate in an exact sequence when $\im f$ is normal.
It is a good exercise to check that these constructions for spaces do not violate this.
}
In fact, these sequences are bountiful in homotopy theory---a first sign that our approach to the subject is a sound one.

\begin{lemma}\label{CoexactSeqsExist}%
\marginnote{\citep[Proposition 2.35]{Switzer}}
Any map $f\co X \to Y$ extends to a coexact sequence \[X \xrightarrow f Y \xrightarrow g Z.\]
\end{lemma}
\begin{proof}
Recall the \define{cone} of $X$, $CX = X \sm I$.
We use this construction to define $C_f$, the \define{mapping cone} of $f$:
\[C_f := Y \cup_f CX = \frac{Y \sqcup CX}{f(x) \sim (x, 1)}.\]
We claim that $C_f$ plays the role of $Z$, and the inclusion $g\co Y \to C_f$ induces the desired exact sequence on mapping sets.
\marginnote[-5\baselineskip]{%
The mapping cone is presented by the following pushout diagram in $\CatOf{Spaces}_{*/}$:
\begin{center}
\begin{tikzcd}[ampersand replacement=\&]
X \arrow{r} \arrow["f"']{d} \& CX \arrow{d} \\
Y \arrow{r} \& C_f.
\end{tikzcd}
\end{center}
While this is \emph{not} a pushout diagram in the homotopy category $h\CatOf{Spaces}_{*/}$, there is an equivalence $CX \simeq *$, so that the diagram has the form
\begin{center}
\begin{tikzcd}[ampersand replacement=\&]
X \arrow{r} \arrow["f"']{d} \& * \arrow{d} \\
Y \arrow{r} \& C_f,
\end{tikzcd}
\end{center}
whence the name ``cofiber''.
The relationship between co/limits in $\CatOf{Spaces}_{*/}$ and interesting phenomena in the homotopy category is quite delicate.
A rule of thumb for the uninitiated is that colimits of loopless diagrams of inclusions are well-behaved.
A proper treatment of this interplay is given by the theory of \define{homotopy co/limits}.
}

To check this, consider a test space $T$, the induced sequence \[[Y \cup_f CX, T] \to [Y, T] \to [X, T],\] and a function $\phi\co Y \to T$.
Note that the exponential adjunction gives a bijection between maps $CX \to T$ and maps $X \to T$ together with a choice of null-homotopy.
Hence, if $\phi \circ f\co X \to T$ is null, then this gives a map $CX \to T$ which agrees with $f$ on the edge of $I$, and the gluing operation determines a map $Z \to T$ which restricts to $\phi$ on $Y$.
Conversely, a map $\widetilde \phi\co Z \to T$ which restricts to $\phi$ on $Y$ can itself be restricted to $CX$, and this gives the required null-homotopy of $\phi \circ f$.
\end{proof}

The remarkable lack of hypotheses in \Cref{CoexactSeqsExist} mean that coexact sequences can be extended indefinitely to the right: \[X \xrightarrow f Y \xrightarrow g Y \cup_f CX \to (Y \cup_f CX) \cup_g CY \to \cdots.\]
The naive presentations of these spaces quickly become unwieldy, but the following alternative presentations are quite tractible:

\begin{lemma}\label{CollapseDoubleCone}\marginnote{\citep[Lemma 2.37]{Switzer}}\pushQED{\qed}
There is a homotopy equivalence \[(Y \cup_f CX) \cup_g CY \to ((Y \cup_f CX) \cup_g CY) / CY. \qedhere \popQED\]
\end{lemma}

\begin{lemma}\label{ConeAndQuotIsRedundant}\marginnote{\citep[Proposition 2.38]{Switzer}}\pushQED{\qed}
For $A \subseteq X$ a subspace, there is a homeomorphism \[(X \cup_i CA) / CA \cong X / A. \qedhere \popQED\]
\end{lemma}

\begin{corollary}\marginnote{\citep[Lemma 2.40]{Switzer}}
The infinite coexact sequence takes the form \[X \xrightarrow f Y \to Y \cup_f CX \to \Susp X \xrightarrow{-f} \Susp Y \to \Susp(Y \cup_f CX) \to \cdots,\] where $\Susp X = S^1 \sm X$ is the \define{suspension} of $X$.
\end{corollary}
\begin{proof}
We need only identify the next two terms after $Z$ and the map between them.
Once that is in hand, we need only note that suspension commutes with the cone and quotient operations used to define $Z$.
To see the claim for the first term after $Z$, we apply the two Lemmas in turn:
\begin{align*}
(Y \cup_f CX) \cup_g CY & \simeq ((Y \cup_f CX) \cup_g CY) / CY \tag{\Cref{CollapseDoubleCone}} \\
& \cong (Y \cup_f CX) / Y \tag{\Cref{ConeAndQuotIsRedundant}} \\
& \cong CX/X \cong \Susp X. \tag{$I / \{0, 1\} \cong S^1$}
\end{align*}
Identically, the second term after $Z$ is described by \[((Y \cup_f CX) \cup_g CY) \cup_{g'} C(Y \cup_f CX) \simeq \Susp Y.\]
The coexact sequence thus takes the desired form.
\end{proof}

Coupling this to our results from last time, this gives an exact sequence
\begin{center}
\begin{tikzcd}
{[X, T]} & {[Y, T]} \arrow{l} & {[\overset{Z}{\overbrace{Y \cup_f CX}}, T]} \arrow{l} & & \text{ptd.\ sets} \\
{[\Susp X, T]} \arrow[out=90, in=270]{rru} & {[\Susp Y, T]} \arrow{l} & {[\Susp Z, T]} \arrow{l} & & \text{groups} \\
{[\Susp^2 X, T]} \arrow[out=90, in=270]{rru} & {[\Susp^2 Y, T]} \arrow{l} & {[\Susp^2 Z, T]} \arrow{l} & \cdots \arrow{l} & \text{ab.\ groups}
\end{tikzcd}
\end{center}
\marginnote[-12\baselineskip]{%
Exact sequences are best behaved on abelian groups, but not all of these are abelian groups---or even groups!
What can be said about the edges, where at least one term is a(n abelian) group?
\begin{construction}
Pinching the middle of the cone $CX$ gives a map \[Y \cup_f CX \to (Y \cup_f CX) \vee \Susp X,\] which gives an action \[[Z, T] \times [\Susp X, T] \to [Z, T].\]
\end{construction}
\begin{lemma}{\citep[2.42--48]{Switzer}}
The map $[Z, T] \to [Y, T]$ is invariant under this action, and on orbits it is an injection. \qed
\end{lemma}
}

There are also dual results for exact sequences: any map of spaces participates in an (infinite) exact sequence.

\begin{lemma}\marginnote{\citep[Proposition 2.54]{Switzer}}
Any map $f\co X \to Y$ extends to an exact sequence \[P_f \to X \xrightarrow f Y,\] where $P_f$ is given by \[P_f = \{(x, \gamma) \in X \times PY \mid f(x) = \gamma(1)\}.\]
\marginnote[-6\baselineskip]{%
Again, $P_f$ appears as a pullback in $\CatOf{Spaces}_{*/}$.
\begin{center}
\begin{tikzcd}[ampersand replacement=\&]
P_f \arrow{r} \arrow{d} \& X \arrow["f"]{d} \\
PY \arrow{r} \& Y
\end{tikzcd}
\end{center}
Again, this square is not a pullback in $h\CatOf{Spaces}_{*/}$, but $PY$ is contractible, earning this object the name \define{homotopy fiber}.
}
\end{lemma}
\begin{proof}[Proof sketch]
Again, the construction of $P_f$ rests on building into it the data of a null-homotopy.
Suppose that $\theta\co T \to Y$ is a null-homotopic map.
A null-homotopy of $\theta$ is the same as a map $T \sm I = CT \to Y$ restricting to $\theta$, which is in turn the same as a map $T \to PY = Y^I$ restricting to $\theta$.
To model a map $\phi\co T \to X$ for which $\theta = f \circ \phi$ becomes null-homotopic, we attach $PY$ along $X$ as in the statement.
\end{proof}

\begin{lemma}\label{LexseqInvolvingP}\pushQED{\qed}%
\marginnote{\citep[Proposition 2.58]{Switzer}}
Iterating this gives \[\cdots \to \Loops^2 X \to \Loops P_f \to \Loops X \to \Loops Y \to P_f \to X \xrightarrow f Y. \qedhere \popQED\]
\end{lemma}

In particular, by applying $\pi_0(-) = [S^0, -]$ and employing the definition $\pi_n X = \pi_0 \Loops^n X$, we get an exact sequence of homotopy groups: \[\cdots \to \pi_2 X \to \pi_2 Y \to \pi_1 P_f \to \pi_1 X \to \pi_1 Y \to \pi_0 P_f \to \pi_0 X \to \pi_0 Y.\]
One of our goals in this class will be to understand what understanding $\pi_*$ earns us, how it changes as $X$ changes, and how $X$ can be effectively dissected to build up knowledge of $\pi_*$ along the way.
This long exact sequence will be one of our main tools for doing so.




\section{Relative homotopy groups}

The construction $P_f$ from the previous lecture is a little mysterious.
To close out this Chapter, we will explore it in two lights: today and a bit later on.

Let us return to the setting of pairs $(X, A, x_0)$ of topological spaces, and let's use $i\co A \to X$ to denote the inclusion of the preferred subspace.
The following is a direct rephrasing of the definition of $P_i$ from the previous section:

\begin{lemma}\marginnote{\citep[Definition 3.8]{Switzer}}
The exact continuation $P_i$ of $i$ is given by the function object \[P_i = (X, A, x_0)^{(I, \partial I, 0)}. \qed\]
\end{lemma}

\noindent
Inspired by this, we consider the adjunction juggle:

\begin{definition}\marginnote{\citep[pg.\ 38]{Switzer}}
For a pair $(A \subseteq X)$, we define the \define{$n$\textsuperscript{th} relative homotopy group} to be \[\pi_n(A \subseteq X) := [(S^{n-1} \subseteq D^n), (A \subseteq X)] \cong [S^{n-1}, P_i] = \pi_{n-1} P_i.\]
\marginnote[-3\baselineskip]{%
Note that this means that the first relative group is a \emph{set}, the second a \emph{group}, and third and above \emph{abelian groups}---one off from the usual sequence of properties.
}
That is, $\pi_n(A \subseteq X)$ consists of $n$--disk maps into $X$ with boundary $\partial D^n$ lying in $A$, considered up to relative homotopy.
\end{definition}

\begin{corollary}\label{LexseqOfRelativeHtpy}%
\marginnote{\citep[Proposition 3.9]{Switzer}}
There is a long exact sequence \[\cdots \to \pi_{n+1}(A \subseteq X) \to \pi_n A \to \pi_n X \to \pi_n (A \subseteq X) \to \pi_{n-1} A \to \cdots. \qed\]
\end{corollary}

% \begin{remark}
% $\pi_n(X, x_0) = \pi_n(X, \{x_0\})$.  So, we can regard the map $\pi_n X \to \pi_n (X, A)$ as induced by $(X, \{x_0\}) \to (X, A)$.
% \end{remark}

\noindent
More qualitatively, these groups track the discrepancy between $\pi_* A$ and $\pi_* X$.
This observation moves us to remark on when there is \emph{no} discrepancy:

\begin{definition}\label{ConnectedDefn}%
\marginnote{\citep[3.12--13 and 3.17]{Switzer}}
A pair $A \subseteq X$ is \define{$n$--connected} if $\pi_{\le n}(A \subseteq X) = 0$.
Equivalently, the map $\pi_{<n} A \to \pi_{<n} X$ is an isomorphism and $\pi_n A \to \pi_n X$ is an epimorphism.
The pair $A \subseteq X$ is a \define{weak equivalence} if it is $\infty$--connected.
\end{definition}

\begin{remark}\marginnote{\citep[3.21]{Switzer}}
As a simple structural application of \Cref{LexseqOfRelativeHtpy}, consider an inclusion $i\co A \subseteq X$ which admits a retraction $r\co X \to A$.
\marginnote{That is: $r i \simeq \id_A$.}
The induced map $\pi_* A \to \pi_* X$ is then an inclusion, and the boundary map $\pi_*(X, A) \to \pi_{*-1}(A)$ is zero.
It follows that there are split short exact sequences
\begin{center}
\begin{tikzcd}
0 \arrow{r} & \pi_n A \arrow{r} & \pi_n X \arrow{r} \arrow[bend right]{l} & \pi_n(A \subseteq X) \arrow{r} & 0.
\end{tikzcd}
\end{center}
For $n \ge 3$, all the groups are abelian, from which we deduce that $\pi_n X$ splits as a sum of $\pi_n A$ and $\pi_n(A \subseteq X)$.
At $n = 2$, we learn naively that $\pi_2 X$ is a semidirect product of $\pi_2 A$ and $\pi_2(X, A)$---but this forces $\pi_2(A \subseteq X)$ to be abelian has well.
Hence, in this situation we have
\[\pi_{\ge 2} X = \pi_{\ge 2} A \oplus \pi_{\ge 2}(A \subseteq X).\]
\end{remark}

\begin{remark}\marginnote{\citep[3.15]{Switzer}}
We can extend these definitions from an inclusion $i\co A \to X$ to a generic map $f\co Y \to X$ using the \define{mapping cylinder}: \[M_f := (Y \times I) \cup_f X.\]
This space receives a map $X \to M_f$ which is a weak equivalence.
\marginnote{It is a good exercise to check that it is a weak equivalence.}
It also receives two maps $Y \to M_f$, one along the ``free'' end of the cylinder $Y \times I$ and one along the ``attached'' end.
Along the free end, the map from $Y$ to $M_f$ is an inclusion, via which $(Y \subseteq M_f)$ can be thought of as a pair.
Along the attached end, the map from $Y$ to $M_f$ factors through $X$, via which it agrees with $f$.
The situation is summarized in the following diagram:
\begin{center}
\begin{tikzcd}
Y \times \{1\} \arrow{d} \arrow[hook]{rd} & M_f \arrow[equal]{d} \\
Y \times I \arrow{r} & (Y \times I) \cup_f X & X \arrow["\simeq"']{l} . \\
Y \times \{0\} \arrow{u} \arrow{ru} \arrow{rru}
\end{tikzcd}
\end{center}
\end{remark}


\newthought{We pause to emphasize} something that the reader might have dismissed as serendipity: by switching the notation $\pi_n(X, A) := \pi_n (A \subseteq X)$, \Cref{LexseqOfRelativeHtpy} looks very much like a corresponding theorem about relative \emph{homology} groups: it announces an exact sequence \[\cdots \to \pi_{n+1}(X, A) \to \pi_n A \to \pi_n X \to \pi_n (X, A) \to \pi_{n-1} A \to \cdots.\]
It is extremely productive to see how far this analogy can be pushed: what theorems about homology can be replicated for homotopy?---and, when a theorem for homology fails for homotopy, is it at least partially recoverable?

As a warm-up to this program, recall that the relative homology groups of a pair of inclusions $x_0 \in B \subseteq A \subseteq X$ can be interrelated.
We will see whether the same can be said of relative homotopy groups.
To this end, consider the long exact sequences associated to the pairs $(X, A)$, $(X, B)$, and $(A, B)$, which arrange into the following commutative diagram:

\begin{center}
\begin{tikzcd}[column sep=0.3em]
\cdots \arrow[blue]{r} & \pi_{n+1}(X, A) \arrow{rr} \arrow[blue]{rd} & & \pi_n(A, B) \arrow{rd} \arrow[orange]{rr} & & \pi_{n-1} B \arrow[orange]{rd} \arrow[purple]{rr} & & \pi_{n-1} X \arrow[purple]{rd} \arrow[blue]{r} & \cdots \\
\cdots \arrow[purple]{rd} \arrow{ru} & & \pi_n A \arrow[orange]{ru} \arrow[blue]{rd} & & \pi_n(X, B) \arrow[purple]{ru} \arrow{rd} & & \pi_{n-1} A \arrow[blue]{ru} \arrow[orange]{rd} & & \cdots \\
\cdots \arrow[orange]{r} & \pi_n B \arrow[orange]{ru} \arrow[purple]{rr} & & \pi_n X \arrow[purple]{ru} \arrow[blue]{rr} & & \pi_n(X, A) \arrow[blue]{ru} \arrow{rr} & & \pi_{n-1}(A, B) \arrow[orange]{r} \arrow{ru} & \cdots
\end{tikzcd}
\end{center}

\noindent
To help with readability, we have colored the long exact sequences associated to \textcolor{blue}{$(X, A)$}, \textcolor{orange}{$(A, B)$}, and \textcolor{purple}{$(X, B)$}.
To complete the symmetric pattern, we have additionally included maps $\pi_n(A, B) \to \pi_n(X, B)$ and $\pi_n(X, B) \to \pi_n(X, A)$ granted to us by naturality, as well as maps $\pi_n(X, A) \to \pi_{n-1}(A, B)$ granted by completing the relevant triangle.
Tracing through the middle, we see that these new maps form an interesting sequence, highlighted in red:

\begin{center}
\begin{tikzcd}[column sep=0.3em]
\cdots \arrow{r} & \textcolor{red}{\pi_{n+1}(X, A)} \arrow[red]{rr} \arrow{rd} & & \textcolor{red}{\pi_n(A, B)} \arrow[red]{rd} \arrow{rr} & & \pi_{n-1} B \arrow{rd} \arrow{rr} & & \pi_{n-1} X \arrow{r} \arrow{rd} & \cdots \\
\cdots \arrow[red]{ru} \arrow{rd} & & \pi_n A \arrow{ru} \arrow{rd} & & \textcolor{red}{\pi_n(X, B)} \arrow{ru} \arrow[red]{rd} & & \pi_{n-1} A \arrow{ru} \arrow{rd} & & \cdots \\
\cdots \arrow{r} & \pi_n B \arrow{ru} \arrow{rr} & & \pi_n X \arrow{ru} \arrow{rr} & & \textcolor{red}{\pi_n(X, A)} \arrow{ru} \arrow[red]{rr} & & \textcolor{red}{\pi_{n-1}(A, B)} \arrow{r} \arrow[red]{ru} & \cdots
\end{tikzcd}
\end{center}

\begin{lemma}\marginnote{\citep[Theorem 3.20]{Switzer}}
This sequence is exact.
\end{lemma}
\begin{proof}[Proof sketch]
Checking that the composites are zero is easy enough.
We describe how the lifting condition is proved for the left-most map pictured.
\marginnote[-\baselineskip]{%
\begin{center}
\begin{tikzcd}[column sep=0.3em, scale=0.4, ampersand replacement=\&]
\not\exists \arrow[|->]{r} \& \tilde{x} \arrow[|->]{rr} \arrow[|->]{rd} \& \& x \arrow[|->]{rd} \arrow[|->]{rr} \& \& 0 \arrow[|->]{rd} \arrow[|->]{rr} \& \& 0 \arrow[|->]{r} \arrow[|->]{rd} \& \cdots \\
\not\exists \arrow[|->]{ru} \arrow[|->]{rd} \& \& \begin{array}{c} y - y' \\ y', y \end{array} \arrow[|->]{ru} \arrow[|->]{rd} \& \& 0 \arrow[|->]{ru} \arrow[|->]{rd} \& \& 0 \arrow[|->]{ru} \arrow[|->]{rd} \& \& \cdots \\
\not\exists \arrow[|->]{r} \& w \arrow[|->]{ru} \arrow[|->]{rr} \& \& z \arrow[|->]{ru} \arrow[|->]{rr} \& \& 0 \arrow[|->]{ru} \arrow[|->]{rr} \& \& 0 \arrow[|->]{r} \arrow[|->]{ru} \& \cdots
\end{tikzcd}
\end{center}}
Suppose that we have an element $x \in \pi_n(A, B)$ mapping to zero in $\pi_n(X, B)$.
Its image in $\pi_{n-1} B$ is then also zero, so that we may lift it to $y \in \pi_n A$.
Define $z \in \pi_n X$ to be the image of $y$; since $y$ is zero by the time it makes it to $\pi_n(X, B)$, so must $z$ be.
We may then also lift $z$ to $w \in \pi_n B$.
Pushing forward $w$ to $y' \in \pi_n A$ gives a second element in the same group, and the difference of the two elements $y - y'$ pushes forward to zero in $\pi_n X$.
Hence, we can lift the difference to an element $\tilde x$ in $\pi_{n+1}(X, A)$.
One checks that this gives the desired lift of $x$: the image of $\tilde x$ in $\pi_n(A, B)$ factors through its image $y - y'$ in $\pi_n(A)$, and of those operands the first is sent to $x$, the second to $0$.
\end{proof}




\section{Fibrations}

Relative to the small and polite model for the coexact continuation $C_f$, the presentation of the exact continuation $P_f$ as a function space feels large and unwieldly.%
\marginnote[-2\baselineskip]{
For instance, if $f\co X \to Y$ is a map of spaces of dimension $d_X$ and $d_Y$, then the dimension of $C_f$ is no more than $d_Y$ and $1 + d_X$.
On the other hand, $P_f$ is firmly infinite-dimensional.
One might ask whether this is inescapable, and we will resolve this much later in \Cref{ComputationsChapter}.
}
In this section we explore a more familiar context in which spaces \emph{like} $P_f$ arise, as well as conditions that they are weak models for exact continuations.

To get off the ground, recall the whole point of the design of $P$ was its participation in the long exact sequence%
\marginnote{\Cref{LexseqInvolvingP}}
\[\cdots \to \pi_2 X \to \pi_1 P \to \pi_1 X \to \pi_1 Y \to \pi_0 P \to \pi_0 X \to \pi_0 Y.\]
Inasmuch as the exact sequence is truly what we're after, we might consider alternative situations in which such sequences arise.

\begin{example}\marginnote{\citep[Theorem 4.1]{Switzer}}
For each $n \ge 0$, there is an isomorphism \[\pi_n(X \times Y) = [S^n, X \times Y] \cong [S^n, X] \times [S^n, Y] = \pi_n(X) \times \pi_n(Y).\]
Rearranged as an exact sequence, the maps
\begin{center}
\begin{tikzcd}
Y \arrow["i_Y"]{r} & X \times Y \arrow["\pi_X"]{r} \arrow[bend right, "\pi_Y"']{l} & X \arrow[bend right, "i_X"']{l}
\end{tikzcd}
\end{center}
induce a split-exact sequence
\begin{center}
\begin{tikzcd}
\cdots \arrow["0"]{r} & \pi_n Y \arrow{r} & \pi_n(X \times Y) \arrow[bend right]{l} \arrow{r} & \pi_n X \arrow[bend right]{l} \arrow["0"]{r} & \cdots.
\end{tikzcd}
\end{center}
\end{example}

\noindent
We would like to axiomatize the pieces of the geometry of the product that we need to induce exact sequences on $\pi_*$.
The main features that we used were the projection and retraction maps, which we used to lift maps $S^n \to X$ and $S^n \to Y$ to maps $S^n \to X \times Y$, and conversely to produce from a map $S^n \to X \times Y$ the projections $S^n \to X$ and $S^n \to Y$.
We will ultimately ask for ``one half'' of this data (i.e., one projection and one inclusion), together with a requirement that they satisfy a very weak variant of this recovery property.

\begin{definition}\marginnote{\citep[Definition 4.2]{Switzer}}
A map $p\co E \to B$
\marginnote{``$E$'' for Espace (fr.), ``$B$'' for Base.}
has the \define{homotopy lifting property} with respect to a space $X$ when for all solid diagrams
\begin{center}
\begin{tikzcd}
X \arrow["f"]{r} \arrow["- \times 0"]{d} & E \arrow["p"]{d} \\
X \times I \arrow["H"]{r} \arrow[densely dotted, "{\widetilde H}"]{ru} & B
\end{tikzcd}
\end{center}
there exists a dashed diagonal lift $\widetilde H$.
That is, homotopies in $B$ lift to homotopies in $E$.
A \define{strong fibration} has the HLP for all spaces.
A \define{fibration} has the HLP for at least the disks $D^n$.
The \define{fiber} of a fibration is $F = p^{-1}(b_0) \subseteq E$.
\end{definition}

\begin{example}
The projection $\pi_X\co X \times Y \to X$ is a fibration with fiber $Y$.
\end{example}

\begin{example}\marginnote{\citep[Proposition 4.3]{Switzer}}
Evaluation $\mathit{ev}\co PX \to X$ gives a fibration with fiber $\Loops X$.
\end{example}

For the remainder of the lecture, we will work to justify that this definition yields the intended long exact sequence of homotopy groups.
The first step is a version of the homotopy lifting property for pairs and its relation to the original definition above.

\begin{lemma}\label{HLPsForPairsVsPtds}%
\marginnote{\citep[Proposition 4.5]{Switzer}}
Consider a fibration $p\co E \to B$, as well as a preferred subset $B' \subseteq B$ of the base and the subset $E' := p^{-1}(B') \subseteq E$ of the total space which lies over it.
If $p$ has the HLP for $X \times I$, then $p'\co (E, E')^{(I, \partial I)} \to (B, B')^{(I, \partial I)}$ has the HLP for $X$.
\end{lemma}
\begin{proof}
Let us begin with an HLP diagram for $p'$, as in
\begin{center}
\begin{tikzcd}
X \arrow["f"]{r} \arrow{d} & (E, E')^{(I, \partial I)} \arrow["p'"]{d} \\
X \times I \arrow["H"]{r} & (B, B')^{(I, \partial I)}
\end{tikzcd}
\end{center}
for which we're meant to produce a lift \[\widetilde H\co X \times I \to (E, E)^{(I, \partial I)}.\]
We may remove the function spaces by applying de-exponentiating:
\begin{center}
\begin{tikzcd}
X \times (I \vee I) \arrow["f''"]{r} \arrow["i"]{d} & E \arrow["p"]{d} \\
X \times I \times I \arrow["H'"]{r} & B.
\end{tikzcd}
\end{center}
The homeomorphism $h\co I \vee I \cong I$ extends to a homeomorphism $h'$ as in
\begin{center}
\begin{tikzcd}
I \vee I \arrow[hook]{d} \arrow["{h, \cong}"]{r} & I \arrow[hook]{d} \\
I \times I \arrow["{h', \cong}"]{r} & I \times I,
\end{tikzcd}
\end{center}
which can be used to smooth out the top-left corner:
\begin{center}
\begin{tikzcd}
X \times I \arrow["{f'' \circ h^{-1}}"]{r} \arrow["{- \times 0}"]{d} & E \arrow["p"]{d} \\
X \times I \times I \arrow["H' \circ h^{-1}"]{r} \arrow[densely dotted, "{\widetilde H'}"]{ru} & B.
\end{tikzcd}
\end{center}
Applying the HLP for $p$ gives $\widetilde{H'}$.  Reversing the application of $h'$ and the exponential adjunction ultimately yields the desired $\widetilde{H}$ in the Lemma statement.
\end{proof}

\begin{corollary}\marginnote{\citep[Theorem 4.6]{Switzer}}
For $p\co E \to B$ a fibration and for subspaces $B' \subseteq B$ and $E' := p^{-1}(B') \subseteq E$, the natural map $\pi_{\ge 1}(E, E') \to \pi_{\ge 1}(B, B')$ is an isomorphism.
\end{corollary}
\begin{proof}
Begin with a class $\omega \co (I, \partial I) \to (B, B')$ in $\pi_1(B, B')$, and consider the lifting square induced by $p\co E \to B$, without considering $B'$ and $E'$:
\begin{center}
\begin{tikzcd}
* \arrow["e_0"]{r} \arrow{d} & E \arrow["p"]{d} \\
* \times I \arrow["\omega"]{r} \arrow["\exists \widetilde{\omega}"]{ru} & B.
\end{tikzcd}
\end{center}
Since $\omega(1) \in B'$ and $E' := p^{-1}(B')$, the lift $\widetilde \omega$ can be considered as a map $\widetilde\omega\co (I, \partial I) \to (E, E')$.
Hence, $\pi_1(E, E') \to \pi_1(B, B')$ is a surjection.

For injectivity on $\pi_1$, suppose that $\omega_1, \omega_2\co (I, \partial I) \to E$ are two relative homotopy classes and that $H\co I \times I \to B$ is a homotopy which relates them in $B$.
We form the homotopy lifting diagram
\begin{center}
\begin{tikzcd}
U \arrow{r} \arrow{d} & E \arrow{d} \\
I \times I \arrow["H"]{r} \arrow["\widetilde{H}", densely dotted]{ru} & B,
\end{tikzcd}
\end{center}
where $U = \partial (I \times I) \setminus (I \times \{1\})$ is a $\sqcup$--shaped figure, the top arrow acts by $\omega_1$ and $\omega_2$ on the two legs, and it carries the bottom of the figure to the basepoint.
The same procedure as in the second half of \Cref{HLPsForPairsVsPtds} produces a filler $\widetilde H$, which witnesses equality in $\pi_1(E, E')$.%
\marginnote[-\baselineskip]{%
More precisely, we avail ourselves of a pointed self-homeomorphism of $I \times I$ which restricts to a homeomorphism of $U$ with $I \times \{0\}$.
}

To dispatch the other homotopy groups, we use the equivalences
\begin{center}
\begin{tikzcd}
\pi_m(E, E') \arrow{d} \arrow[equal]{r} & \pi_{m-1} (E' \subseteq E)^{(\partial I \subseteq I)} \arrow{d} \arrow[equal]{r} & \pi_{m-1} ((E' \subseteq E)^{(\partial I \subseteq I)}, (E')^I) \arrow{d} \\
\pi_m(B, B') \arrow[equal]{r} & \pi_{m-1} (B' \subseteq B)^{(\partial I \subseteq I)} \arrow[equal]{r} & \pi_{m-1} ((B' \subseteq B)^{(\partial I \subseteq I)}, (B')^I).
\end{tikzcd}
\end{center}
The first equivalence is definitional, and the second follows from contractibility of pathspaces.
\Cref{HLPsForPairsVsPtds} entails that the map \[((E' \subseteq E)^{(\partial I, I)}, (E')^I) \to ((B' \subseteq B)^{(\partial I, I)}, (B')^I)\] inducing the rightmost vertical map is a fibration.  Taking as an inductive hypothesis that it is an isomorphism on $\pi_{m-1}$ entails the inductive conclusion that the leftmost vertical map is an isomorphism.
\end{proof}

\begin{corollary}\marginnote{\citep[4.7]{Switzer}}
There is a long exact sequence \[\cdots \to \pi_n F \to \pi_n E \to \pi_n B \to \pi_{n-1} F \to \cdots.\]
\end{corollary}
\begin{proof}
Set $B' = \{b_0\}$ in the above, and identify these terms respectively with \[\cdots \to \pi_n F \to \pi_n E \to \pi_n(E, F) \to \pi_{n-1} F \to \cdots. \qedhere\]
\end{proof}

\begin{corollary}\label{LoopsShiftsPi}\marginnote{\citep[Corollary 4.8]{Switzer}}
If $E$ is contractible (e.g., as in the fibration $\mathit{ev}\co PX \to X$), then the going-around map $\pi_{n+1} B \to \pi_n F$ is an isomorphism. \qed
\end{corollary}




\section{Fiber bundles and examples}

\todo{Add non-example: the S-shaped graph ``fibering'' over the line.}
Fibrations are all over classical geometry.
Most commonly, they take the form of a \define{fiber bundle}, which is a less homotopically-minded take on the important properties of the Cartesian product.

\begin{definition}\label{FiberBundleDefn}%
\marginnote{\citep[Definition 4.9]{Switzer}}
A \define{fiber bundle with fiber $F$} is a map $p\co E \to B$ such that $B$ admits an open cover $\{U_\alpha\}_\alpha$ with local homeomorphisms $\phi_\alpha\co U_\alpha \times F \to p^{-1}(U_\alpha)$, which each satisfy $p \phi_\alpha = p|_{U_\alpha}$.
\marginnote[-2\baselineskip]{%
Briefly, a fiber product is locally and compatibly a product space.
This definition \emph{must} be given in $\CatOf{Spaces}$ and not $h\CatOf{Spaces}$: the S-shaped space $S = ([-1, 0] \times \{0\}) \cup (\{0\} \times I) \cup (I \times \{1\})$ projects on its first coordinate to $[-1, 1]$ with contractible fibers, but it is neither a fiber bundle nor a fibration.
}
\end{definition}

\begin{lemma}\marginnote{\citep[Proposition 4.10]{Switzer}}
Every fiber bundle is a fibration.
\marginnote{If $B$ is paracompact, then $p$ is actually a strong fibration.}
\end{lemma}
\begin{proof}[Proof sketch]
Fix an open cover as in \Cref{FiberBundleDefn}.
Given a map \[f\co D^n \times I \to B\] to be lifted, subdivide the compact space $D^n \times I$ so finely that its pieces are each contained in one member of the cover.
Once this is arranged, one can build the desired lift purely locally.
\end{proof}

The most common source of these ``local projections'' is Lie theory: a quotient map of a Lie group by a subgroup has everywhere-isomorphic fibers, and in good cases the coset space can be arranged to admit a suitable open cover.
We spend most of today contemplating this case.

\begin{lemma}\marginnote{\citep[Theorem 4.13]{Switzer}}
Take $H \le G$ to be a closed subgroup of a topological group.
\marginnote{We do not assume normality!}
Suppose that the identity coset $H \in G/H$ has an open neighborhood $U$ with a section $U \xrightarrow s G \xrightarrow p G/H$.
The map $p$ is then a fiber bundle with fiber $H$.
\end{lemma}
\begin{proof}
Left-multiplying by $g \in G$, the condition at $H$ begets a local section at $gH \in G/H$.
Such a section extends to a local homeomorphism as in the definition of a fiber bundle via \[U_{gH} \times H \xrightarrow{s_g \times 1} G \times G \xrightarrow\mu G.\]
Using these opens to cover the base shows $p$ to be a fiber bundle.
\end{proof}

\begin{example}[Stiefel manifolds]\marginnote{\citep[Examples 4.14.1]{Switzer}}
Consider the subgroup $O(n) \subseteq O(n+k)$ of block matrices \[\left\{\left[\begin{array}{c|c} O(n) & 0 \\ \hline 0 & I \end{array} \right]\right\} \subseteq O(n+k).\]
The quotient is the space of orthonormal $k$--frames in $\R^{n+k}$.
\marginnote{For example, $O(n) / O(n-1)$ is homeomorphic to $S^{n-1}$.}
To construct a local section, note that there is an open neighborhood $U$ of the standard frame $(e_{n+1}, \ldots, e_{n+k})$ consisting of those $(u_{n+1}, \ldots, u_{n+k})$ satisfying the condition \[\det\left[e_1 \mid \cdots \mid e_n \mid u_{n+1} \mid \cdots \mid u_{n+k}\right] \ne 0.\]
On $U$, the local section is defined by applying Gram--Schmidt to the block matrix of columns $[e_1 \mid \cdots \mid e_n \mid u_{n+1} \mid \cdots \mid u_{n+k}]$ to produce an element of $O(n+k)$.
\end{example}

\begin{example}[Grassmannians]\label{GrassmanniansAreFiberBundles}%
\marginnote{\citep[Examples 4.14.2]{Switzer}}
The further quotient by \[\left\{ \left[ \begin{array}{c|c} O(n) & 0 \\ \hline 0 & O(k) \end{array} \right] \right\} \le O(n+k)\] gives the space of $k$--dimensional subspaces in $\R^{n+k}$.
Consider the open neighborhood $U$ of $(e_{n+1}, \ldots, e_{n+k})$ consisting of those subspaces $W$ which trivially intersect the subspace $\<e_1, \ldots, e_n\>$.
By projecting $e_{n+1}, \ldots, e_{n+k}$ into $W$ and applying Gram--Schmidt, this produces an orthonormal $k$--frame, i.e., a section landing in $O(n+k) / O(n)$.
This can be used to construct a triple of fiber bundles
\begin{center}
\begin{tikzcd}
& O(n) \arrow{rd} \arrow{ld} \\
\frac{O(n+k)}{O(k)} \arrow{rr} & & \frac{O(n+k)}{O(n) \times O(k)},
\end{tikzcd}
\end{center}
even though the bottom map is not a quotient from a group.
\end{example}

\begin{example}\marginnote{\citep[Examples 4.14.4, 5, 7]{Switzer}}
These linear algebraic examples do not rest on properties of the reals.
One can build analogues of these examples with $U(n)$ and $\C^n$, or with $\Sp(n)$ and $\H^n$.
\end{example}

\begin{example}\label{SOtoOisAFiberBundle}%
\marginnote{\citep[Examples 4.14.3]{Switzer}}
The sequence \[SO(n) \to O(n) \xrightarrow{\det} O(1)\] admits a section \[\pm 1 \mapsto \left( \begin{array}{c|c} \pm 1 & 0 \\ \hline 0 & I \end{array} \right),\] which witnesses it as a fiber bundle.
\end{example}

\begin{example}\marginnote{\citep[Proposition 4.15]{Switzer}}
Applying the long exact sequence of homotopy for a fiber bundle to \Cref{SOtoOisAFiberBundle} shows \[\pi_{\ge 1} SO(m) \cong \pi_{\ge 1} O(n).\]
\end{example}

\noindent
This isomorphism of homotopy groups is attractive enough that we give fiber bundles with discrete fibers a special name:

\begin{definition}\marginnote{\citep[Definition 4.16]{Switzer}}
A fiber bundle with discrete fiber is called a \define{covering space}.
\end{definition}

\begin{example}\marginnote{\citep[Examples 4.18.1]{Switzer}}
The quotient sequence \[\Z \to \R \to S^1\] witnesses $\R$ as a cover of $S^1$ with discrete fiber $\Z$.
Thinking of $S^1 \subseteq \C$ as the complex numbers of unit norm, a local section is given by \[z \mapsto \frac{1}{2 \pi i} \log z.\]
\end{example}

A discrete fiber has sufficiently simple structure that one can often automatically construct fiber bundles as quotients by group actions, without needing to manufacture a local section to guarantee sane behavior.
We also record this easier situation.

\begin{definition}\marginnote{\citep[4.19]{Switzer}}
A discrete group $G$ acts \define{properly discontinuously} on a space $X$ when\ldots
\begin{enumerate}
    \item \ldots each point $x \in X$ admits a neighborhood $U_x$ so that $g U_x$ never intersects $U_x$ for non-identity $g$.\label{PropDiscon1}
    \item \ldots for all points $x, y \in X$ in different orbits, there are neighborhoods $U_x$, $U_y$ so that $gU_x$ never meets $U_y$.\label{PropDiscon2}
\end{enumerate}
\end{definition}

\begin{lemma}\marginnote{\citep[Proposition 4.20]{Switzer}}
If $G$ acts properly discontinuously on $X$, then $p\co X \to X/G$ is a covering (and $X/G$ is Hausdorff).
\end{lemma}
\begin{proof}
For $[x] \in X/G$, choose a neighborhood $U_x$ guaranteed by \eqref{PropDiscon1}, and let $p(U_x)$ be the neighborhood of $[x]$ in the base.
The disjointness property allows us to define the local section \[p^{-1}(p(U_x)) \to G \times p(U_x). \qedhere\]
\end{proof}

\begin{remark}\marginnote{\citep[Remarks 4.21.i]{Switzer}}
If $\pi_0 X = 0$, then in the short exact sequence of pointed sets \[0 \to \pi_1 X \to \pi_1 X/G \to \pi_0 G \to 0\] the last map is actually a group homomorphism.
\end{remark}

\begin{example}\label{Pi1S1Calculation}\marginnote{\citep[Remarks 4.21.iv]{Switzer}}
$\Z$ acting on $\R$ by $1 \cdot x = x+1$ is properly discontinuous.
Since $\R$ is furthermore contractible, we conclude \[\pi_n S^1 = \begin{cases} \Z & \text{when $n = 1$}, \\ 0 & \text{otherwise}. \end{cases}\]
\end{example}

\begin{remark}\marginnote{\citep[Remarks 4.21.ii]{Switzer}}
A covering $p\co E \to B$ is \define{normal} if $p_*(\pi_1 E) \subseteq \pi_1 B$ is normal.
All normal covers arise as quotients by a $G$--action on $E$.
\end{remark}

\begin{remark}\marginnote{\citep[Remarks 4.21.iii]{Switzer}}
For $X$ a Hausdorff space, acted on by a finite group $G$ without fixed points, the $G$--action is automatically properly discontinuous.
\end{remark}

\todo{Mention the $\pi_1$ action somewhere in all of this.}




\begin{subappendices}

\section{Vector bundles}




% \section{The action of $\pi_1$}

% \todo{I remember not being convinced of the value of this lecture.}
% Before continuing our study of $P_f$, there is one other ``old'' fact about homotopy groups we should investigate: their dependence on $x_0 \in X$.  You might even remember that paths $\gamma$ in $X$ induce isomorphisms $\pi_1(X; \gamma(0)) \to \pi_1(X; \gamma(1))$.  This fits into a framework we have considered already.  We begin with the algebraic thing we are trying to model.

% \begin{definition}
% For $G$, $A$ groups, an action $\alpha\co G \times A \to A$ is \define{compatible} when $g(a_1 a_2) = (g a_1)(g a_2)$, i.e., the following commutes
% \begin{center}
% \begin{tikzcd}
% G \times A \times A \arrow["\Delta \times \id \times \id"]{r} \arrow["\id \times \mu"]{d} & G \times G \times A \times A \arrow["\simeq"]{r} & G \times A \times G \times A \arrow["\alpha \times \alpha"]{r} & A \times A \arrow["\mu"]{d} \\
% G \times A \arrow["\alpha"]{rrr} & & & A.
% \end{tikzcd}
% \end{center}
% \end{definition}

% \begin{example}
% $G$ acts compatibly on itself by conjugation.
% \end{example}

% \begin{example}
% For $A$ abelian (i.e., a $\Z$--module), this is equivalent to a $\Z[G]$--module structure.
% \end{example}

% The theorem we want to prove is that $\pi_1 X$ acts compatibly on $\pi_n X$, $n \ge 1$.

% \begin{definition}
% An $H$--cogroup $K$ acts \define{compatibly} on an $H$--cogroup $L$ when the diagram dual to the one above commutes.
% \end{definition}

% \begin{corollary}
% For such $H$--cogroups, the action of $[K, T]$ on $[L, T]$ is compatible. \qed
% \end{corollary}

% \begin{lemma}
% The following defines a compatible coaction of $S^1$ on $S^n$: \todo[inline]{Picture!}
% \end{lemma}
% \begin{proof}
% \todo[inline]{Picture!}
% \marginnote{The proof is a little more obnoxious when $n = 1$.}
% \end{proof}

% \begin{remark}
% There is also a relative version of this story: $S^1$ has a compatible coaction on $(CS^n, S^n)$, hence $\pi_1 A$ acts compatibly on $\pi_n(X, A)$ for $n \ge 2$.
% \end{remark}

% \begin{lemma}
% The action satisfies various naturalities:
% \begin{enumerate}
%     \item $(X, A) \to (Y, B)$ induces
%     \begin{center}
%     \begin{tikzcd}
%     \pi_1 X \times \pi_n X \arrow{r} \arrow{d} & \pi_n X \arrow{d} \\
%     \pi_1 Y \times \pi_1 Y \arrow{r} & \pi_n Y, 
%     \end{tikzcd}
%     \begin{tikzcd}
%     \pi_1 A \times \pi_n(X, A) \arrow{r} \arrow{d} & \pi_n(X, A) \arrow{d} \\
%     \pi_1 B \times \pi_n(Y, B) \arrow{r} & \pi_n(Y, B).
%     \end{tikzcd}
%     \end{center}
%     \item The following diagrams commute:
%     \begin{center}
%     \begin{tikzcd}
%     \pi_1 A \times \pi_n A \arrow{r} \arrow{d} & \pi_n A \arrow{d} \\
%     \pi_1 X \times \pi_n X \arrow{r} & \pi_n X,
%     \end{tikzcd}
%     \begin{tikzcd}
%     \pi_1 A \times \pi_n(X, A) \arrow{r} \arrow{d} & \pi_n(X, A) \arrow{d} \\
%     \pi_1 A \times \pi_{n-1} A \arrow{r} & \pi_{n-1} A.
%     \end{tikzcd}
%     \end{center}
%     \item The action of $\pi_1 X$ on itself is by conjugation: $\gamma \cdot \alpha = \gamma \alpha \gamma^{-1}$. \qed
% \end{enumerate}
% \end{lemma}

% \begin{remark}
% A weak equivalence $f\co Y \to X$ thus induces an isomorphism of $\Z[\pi_1 X]$--modules, in addition to just abelian groups, a strictly stronger condition.  There is much more structure; this is the start of the study of $\Pi$--algebras.
% \end{remark}

% \begin{remark}
% There is a messy version of this that lets us encode the change of basepoint maps from the intro\todo{See Switzer pg.\ 47--49}.  The main conclusion is that $\pi_n(X, x_0) \cong \pi_n(X, x'_0)$ \emph{unnaturally} if $\pi_0 X = *$ and \emph{naturally} if $\pi_1 X = 1$.
% \end{remark}

% \begin{remark}
% Take discrete $G$ to act properly discontinuously on $X$.  If $\pi_1 X = 0$, then $\pi_1 X/G \cong \pi_0 G$, hence we get a $G$--action on $\pi_{\ge 2}(X/G)$.  In fact, $\pi_n X \to \pi_n(X/G)$ respects this action.
% \end{remark}

\end{subappendices}
